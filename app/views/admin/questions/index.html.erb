<div class="space-y-6">
  <div class="flex items-center justify-between">
    <h2 class="text-3xl font-bold text-gray-900">問題管理</h2>
    <%= link_to "新規作成", new_admin_question_path, class: "px-6 py-3 bg-blue-600 text-white font-bold rounded-lg hover:bg-blue-700" %>
  </div>
  
  <!-- 検索フィルター -->
  <div class="bg-white rounded-lg shadow p-6">
    <%= form_with url: admin_questions_path, method: :get, class: "space-y-4" do |f| %>
      <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
        <div>
          <%= f.label :subject_id, "科目", class: "block text-sm font-medium text-gray-700 mb-2" %>
          <%= f.select :subject_id, 
                       options_from_collection_for_select(@subjects, :id, :name, params[:subject_id]),
                       { include_blank: "すべて" },
                       class: "w-full rounded-lg border-gray-300" %>
        </div>
        
        <div>
          <%= f.label :difficulty, "難易度", class: "block text-sm font-medium text-gray-700 mb-2" %>
          <%= f.select :difficulty,
                       options_for_select(Question::DIFFICULTY_LABELS.invert, params[:difficulty]),
                       { include_blank: "すべて" },
                       class: "w-full rounded-lg border-gray-300" %>
        </div>
        
        <div>
          <%= f.label :keyword, "キーワード", class: "block text-sm font-medium text-gray-700 mb-2" %>
          <%= f.text_field :keyword, 
                          value: params[:keyword],
                          placeholder: "単語、意味、ヒントで検索",
                          class: "w-full rounded-lg border-gray-300" %>
        </div>
        
        <div class="flex items-end">
          <%= f.submit "検索", class: "w-full px-6 py-2 bg-gray-600 text-white font-bold rounded-lg hover:bg-gray-700" %>
        </div>
      </div>
    <% end %>
  </div>
  
  <!-- 問題一覧 -->
  <div class="bg-white rounded-lg shadow overflow-hidden">
    <div class="px-6 py-4 border-b border-gray-200">
      <div class="text-sm text-gray-600">
        全<%= @questions.total_count %>件中 <%= @questions.offset_value + 1 %>〜<%= [@questions.offset_value + @questions.size, @questions.total_count].min %>件を表示
      </div>
    </div>
    
    <div class="overflow-x-auto">
      <table class="min-w-full divide-y divide-gray-200">
        <thead class="bg-gray-50">
          <tr>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">単語</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">意味</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">科目</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">単元</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">難易度</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">操作</th>
          </tr>
        </thead>
        <tbody class="bg-white divide-y divide-gray-200">
          <% @questions.each do |question| %>
            <tr>
              <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"><%= question.word %></td>
              <td class="px-6 py-4 text-sm text-gray-900"><%= question.meaning %></td>
              <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500"><%= question.subject.name %></td>
              <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500"><%= question.unit.name %></td>
              <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                <span class="px-2 py-1 text-xs font-medium rounded-full
                  <%= case question.difficulty
                      when 'easy' then 'bg-green-100 text-green-800'
                      when 'normal' then 'bg-blue-100 text-blue-800'
                      when 'hard' then 'bg-red-100 text-red-800'
                      end %>">
                  <%= Question::DIFFICULTY_LABELS[question.difficulty] %>
                </span>
              </td>
              <td class="px-6 py-4 whitespace-nowrap text-sm space-x-2">
                <%= link_to "編集", edit_admin_question_path(question), class: "text-blue-600 hover:text-blue-800" %>
                <%= button_to "削除", admin_question_path(question), 
                             method: :delete,
                             data: { confirm: "本当に削除しますか？" },
                             class: "text-red-600 hover:text-red-800" %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
    
    <!-- ページネーション -->
    <div class="px-6 py-4 border-t border-gray-200">
      <%= paginate @questions, theme: "twitter-bootstrap-4" %>
    </div>
  </div>
</div>
