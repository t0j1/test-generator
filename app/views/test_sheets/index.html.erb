<div class="min-h-screen bg-gray-50 py-8">
  <div class="mx-auto max-w-6xl px-4">
    <!-- ヘッダー -->
    <div class="mb-8 flex items-center justify-between">
      <div>
        <h1 class="mb-2 text-3xl font-bold text-gray-900">印刷履歴</h1>
        <p class="text-gray-600">作成したテストの履歴を確認できます</p>
      </div>
      <div>
        <%= link_to "新しいテストを作る", new_test_sheet_path, class: "rounded-lg bg-blue-600 px-6 py-3 font-bold text-white transition-colors hover:bg-blue-700" %>
      </div>
    </div>

    <!-- テスト件数 -->
    <div class="mb-6 rounded-lg bg-white p-6 shadow">
      <div class="grid grid-cols-3 gap-6">
        <div>
          <div class="mb-1 text-sm text-gray-600">総テスト数</div>
          <div class="text-3xl font-bold text-gray-900">
            <%= TestSheet.count %>件
          </div>
        </div>
        <div>
          <div class="mb-1 text-sm text-gray-600">印刷済み</div>
          <div class="text-3xl font-bold text-green-600">
            <%= TestSheet.where.not(printed_at: nil).count %>件
          </div>
        </div>
        <div>
          <div class="mb-1 text-sm text-gray-600">未印刷</div>
          <div class="text-3xl font-bold text-gray-500">
            <%= TestSheet.where(printed_at: nil).count %>件
          </div>
        </div>
      </div>
    </div>

    <!-- テスト一覧 -->
    <% if @test_sheets.any? %>
      <div class="space-y-4">
        <% @test_sheets.each do |test_sheet| %>
          <div class="rounded-lg bg-white p-6 shadow transition-shadow hover:shadow-md">
            <div class="flex items-start justify-between">
              <!-- 左側: テスト情報 -->
              <div class="flex-1">
                <div class="mb-2 flex items-center gap-3">
                  <h3 class="text-xl font-bold text-gray-900">
                    <%= test_sheet.subject.name %> - <%= test_sheet.unit.name %>
                  </h3>
                  <%= print_status_badge(test_sheet) %>
                </div>
                
                <div class="flex gap-6 text-sm text-gray-600">
                  <div>
                    <span class="font-medium">難易度:</span>
                    <%= difficulty_label_for_display(test_sheet) %>
                  </div>
                  <div>
                    <span class="font-medium">問題数:</span>
                    <%= test_sheet.question_count %>問
                  </div>
                  <div>
                    <span class="font-medium">学年:</span>
                    高<%= test_sheet.unit.grade %>
                  </div>
                </div>

                <div class="mt-3 flex gap-6 text-xs text-gray-500">
                  <div>
                    <span class="font-medium">作成:</span>
                    <%= format_test_created_at(test_sheet) %>
                  </div>
                  <% if test_sheet.printed? %>
                    <div>
                      <span class="font-medium">印刷:</span>
                      <%= format_printed_at(test_sheet) %>
                    </div>
                  <% end %>
                </div>
              </div>

              <!-- 右側: アクションボタン -->
              <div class="flex gap-2">
                <%= link_to "表示", test_sheet_path(test_sheet), class: "rounded-lg bg-blue-600 px-4 py-2 text-sm text-white transition-colors hover:bg-blue-700" %>
                <%= link_to "印刷", preview_test_sheet_path(test_sheet), class: "rounded-lg bg-gray-600 px-4 py-2 text-sm text-white transition-colors hover:bg-gray-700" %>
              </div>
            </div>
          </div>
        <% end %>
      </div>

      <!-- ページネーション（kaminari gem使用時） -->
      <% if @test_sheets.respond_to?(:total_pages) && @test_sheets.total_pages > 1 %>
        <div class="mt-8 flex justify-center">
          <%= paginate @test_sheets %>
        </div>
      <% end %>

    <% else %>
      <!-- テストが1件もない場合 -->
      <div class="rounded-lg bg-white p-12 text-center shadow">
        <div class="mb-4 text-6xl">📝</div>
        <h3 class="mb-2 text-xl font-bold text-gray-900">テストがまだありません</h3>
        <p class="mb-6 text-gray-600">最初のテストを作成しましょう</p>
        <%= link_to "テストを作る", new_test_sheet_path, class: "inline-block rounded-lg bg-blue-600 px-6 py-3 font-bold text-white transition-colors hover:bg-blue-700" %>
      </div>
    <% end %>
  </div>
</div>
